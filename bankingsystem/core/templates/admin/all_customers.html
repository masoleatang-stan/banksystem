{% extends "base.html" %}
{% block content %}


<h2>All Customers</h2>

<form method="get" style="margin-bottom: 15px;">
  <input
    type="text"
    name="q"
    placeholder="Search by username, email, or name"
    value="{{ request.GET.q }}"
    style="padding: 6px; width: 300px;"
  >
  <button type="submit">Search</button>
</form>


<table>
  <thead>
  <tr>
    <th>Username</th>
    <th>Email</th>
    <th>Full Name</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  {% for customer in customers %}
  <tr>
    <td>{{ customer.user.username }}</td>
    <td>{{ customer.user.email }}</td>
    <td>{{ customer.user.get_full_name }}</td>
    <td>
      <!-- VIEW PROFILE -->
      <a href="{% url 'customer_detail' customer.user.id %}">
        View
      </a>

      <!-- EDIT -->
      |
      <a href="{% url 'edit_customer' customer.user.id %}">
        Edit
      </a>

      <!-- DELETE -->
      |
      <a href="{% url 'delete_customer' customer.user.id %}"
         onclick="return confirm('Are you sure you want to delete this customer?');">
        Delete
      </a>
    </td>
  </tr>
  {% empty %}
  <tr>
    <td colspan="4">No customers found.</td>
  </tr>
  {% endfor %}
  </tbody>
</table>

{% endblock %}